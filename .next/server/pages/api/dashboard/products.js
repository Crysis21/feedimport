"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/dashboard/products";
exports.ids = ["pages/api/dashboard/products"];
exports.modules = {

/***/ "(api-node)/./lib/firebase.js":
/*!*************************!*\
  !*** ./lib/firebase.js ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"firebase/auth\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__]);\n([firebase_app__WEBPACK_IMPORTED_MODULE_0__, firebase_auth__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyCPiNqBJ6bQ-PhQpSK-YCFIGDBikpcClPI\",\n    authDomain: \"feeder-fa563.firebaseapp.com\",\n    projectId: \"feeder-fa563\",\n    storageBucket: \"feeder-fa563.firebasestorage.app\",\n    messagingSenderId: \"189009193217\",\n    appId: \"1:189009193217:web:4f297cf644c8a9c14b1300\"\n};\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (app);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9maXJlYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNkM7QUFDTDtBQUNVO0FBRWxELE1BQU1HLGlCQUFpQjtJQUNyQkMsUUFBUUMseUNBQTRCO0lBQ3BDRyxZQUFZSCw4QkFBZ0M7SUFDNUNLLFdBQVdMLGNBQStCO0lBQzFDTyxlQUFlUCxrQ0FBbUM7SUFDbERTLG1CQUFtQlQsY0FBd0M7SUFDM0RXLE9BQU9YLDJDQUEyQjtBQUNwQztBQUVBLE1BQU1hLE1BQU1sQiwyREFBYUEsQ0FBQ0c7QUFDbkIsTUFBTWdCLE9BQU9sQixzREFBT0EsQ0FBQ2lCLEtBQUs7QUFDMUIsTUFBTUUsS0FBS2xCLGdFQUFZQSxDQUFDZ0IsS0FBSztBQUNwQyxpRUFBZUEsR0FBR0EsRUFBQyIsInNvdXJjZXMiOlsiL1VzZXJzL2NyaXN0aWFuL2Rldi9ob2xkb25lL2ZlZWRpbXBvcnQvbGliL2ZpcmViYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVBcHAgfSBmcm9tICdmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gJ2ZpcmViYXNlL2F1dGgnO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSxcbiAgYXV0aERvbWFpbjogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVVUSF9ET01BSU4sXG4gIHByb2plY3RJZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgc3RvcmFnZUJ1Y2tldDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lELFxuICBhcHBJZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBQX0lEXG59O1xuXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcbmV4cG9ydCBjb25zdCBhdXRoID0gZ2V0QXV0aChhcHApO1xuZXhwb3J0IGNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XG5leHBvcnQgZGVmYXVsdCBhcHA7Il0sIm5hbWVzIjpbImluaXRpYWxpemVBcHAiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwiZmlyZWJhc2VDb25maWciLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiRklSRUJBU0VfQVBJX0tFWSIsImF1dGhEb21haW4iLCJGSVJFQkFTRV9BVVRIX0RPTUFJTiIsInByb2plY3RJZCIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJzdG9yYWdlQnVja2V0IiwiRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIkZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQiLCJhcHBJZCIsIkZJUkVCQVNFX0FQUF9JRCIsImFwcCIsImF1dGgiLCJkYiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/firebase.js\n");

/***/ }),

/***/ "(api-node)/./lib/models.js":
/*!***********************!*\
  !*** ./lib/models.js ***!
  \***********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FeedModel: () => (/* binding */ FeedModel),\n/* harmony export */   ProductModel: () => (/* binding */ ProductModel),\n/* harmony export */   SyncJobModel: () => (/* binding */ SyncJobModel),\n/* harmony export */   WebhookModel: () => (/* binding */ WebhookModel)\n/* harmony export */ });\n/* harmony import */ var _firebase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./firebase.js */ \"(api-node)/./lib/firebase.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_firebase_js__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__]);\n([_firebase_js__WEBPACK_IMPORTED_MODULE_0__, firebase_firestore__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nclass FeedModel {\n    static async create(userId, feedData) {\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'feeds'), {\n            ...feedData,\n            userId,\n            createdAt: new Date(),\n            updatedAt: new Date(),\n            status: 'active',\n            lastSyncAt: null,\n            syncInterval: feedData.syncInterval || 3600000,\n            isPaused: false\n        });\n        return docRef.id;\n    }\n    static async getByUser(userId) {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'feeds'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('userId', '==', userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)('createdAt', 'desc'));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n    static async getById(feedId) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'feeds', feedId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        return docSnap.exists() ? {\n            id: docSnap.id,\n            ...docSnap.data()\n        } : null;\n    }\n    static async update(feedId, updates) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'feeds', feedId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, {\n            ...updates,\n            updatedAt: new Date()\n        });\n    }\n    static async delete(feedId) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'feeds', feedId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(docRef);\n    }\n}\nclass ProductModel {\n    static async createOrUpdate(feedId, productData) {\n        const productId = `${feedId}_${productData.sku || productData.id}`;\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products', productId);\n        const existingDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        const existingData = existingDoc.exists() ? existingDoc.data() : null;\n        const shouldUpdateCategory = !existingData || !existingData.emagCategory;\n        const productDoc = {\n            ...productData,\n            feedId,\n            lastUpdated: new Date(),\n            categoryProcessed: existingData?.categoryProcessed || false,\n            emagCategory: existingData?.emagCategory || null,\n            emagCategoryPath: existingData?.emagCategoryPath || null\n        };\n        if (!existingData) {\n            productDoc.createdAt = new Date();\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(docRef, productDoc, {\n            merge: true\n        });\n        return productId;\n    }\n    static async getByFeed(feedId, limitCount = 100, offset = 0) {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', '==', feedId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)('lastUpdated', 'desc'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n    static async getUnprocessedProducts(limitCount = 50) {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('categoryProcessed', '==', false), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n    static async updateCategory(productId, categoryData) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products', productId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, {\n            emagCategory: categoryData.title,\n            emagCategoryId: categoryData.id,\n            emagCategoryPath: categoryData.path,\n            categoryProcessed: true,\n            categoryUpdatedAt: new Date()\n        });\n    }\n    static async getForFeedAPI(filters = {}) {\n        let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products');\n        const conditions = [];\n        if (filters.feedId) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', '==', filters.feedId));\n        }\n        if (filters.brand) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('brand', '==', filters.brand));\n        }\n        if (filters.limit) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(filters.limit));\n        }\n        if (conditions.length > 0) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(q, ...conditions);\n        }\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n    static async getForDashboard(filters = {}) {\n        let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products');\n        const conditions = [];\n        // Filter by user's feeds\n        if (filters.feedIds && filters.feedIds.length > 0) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', 'in', filters.feedIds.slice(0, 10))); // Firestore limit\n        }\n        // Filter by specific feed\n        if (filters.feedId) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', '==', filters.feedId));\n        }\n        // Filter by brand\n        if (filters.brand) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('brand', '==', filters.brand));\n        }\n        // Filter by category processing status\n        if (filters.categoryProcessed !== null) {\n            conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('categoryProcessed', '==', filters.categoryProcessed));\n        }\n        // Add ordering and limit\n        conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)('lastUpdated', 'desc'));\n        conditions.push((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(filters.limit || 50));\n        if (conditions.length > 0) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(q, ...conditions);\n        }\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        let products = snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n        // Client-side filtering for search terms (since Firestore doesn't support full-text search)\n        if (filters.search) {\n            const searchLower = filters.search.toLowerCase();\n            products = products.filter((product)=>(product.title || '').toLowerCase().includes(searchLower) || (product.description || '').toLowerCase().includes(searchLower) || (product.brand || '').toLowerCase().includes(searchLower) || (product.originalCategories || []).some((cat)=>cat.toLowerCase().includes(searchLower)));\n        }\n        return {\n            products,\n            total: products.length\n        };\n    }\n    static async getBrandsByUser(feedIds) {\n        if (!feedIds || feedIds.length === 0) return [];\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', 'in', feedIds.slice(0, 10)));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        const brands = new Set();\n        snapshot.docs.forEach((doc)=>{\n            const product = doc.data();\n            if (product.brand && product.brand.trim()) {\n                brands.add(product.brand.trim());\n            }\n        });\n        return Array.from(brands).sort();\n    }\n    static async getProcessingStats(feedIds) {\n        if (!feedIds || feedIds.length === 0) {\n            return {\n                processed: 0,\n                unprocessed: 0,\n                total: 0\n            };\n        }\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'products'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', 'in', feedIds.slice(0, 10)));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        let processed = 0;\n        let unprocessed = 0;\n        snapshot.docs.forEach((doc)=>{\n            const product = doc.data();\n            if (product.categoryProcessed === true) {\n                processed++;\n            } else {\n                unprocessed++;\n            }\n        });\n        return {\n            processed,\n            unprocessed,\n            total: processed + unprocessed\n        };\n    }\n}\nclass SyncJobModel {\n    static async create(feedId, type = 'scheduled') {\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'sync_jobs'), {\n            feedId,\n            type,\n            status: 'pending',\n            createdAt: new Date(),\n            startedAt: null,\n            completedAt: null,\n            error: null,\n            itemsProcessed: 0,\n            itemsTotal: 0\n        });\n        return docRef.id;\n    }\n    static async updateStatus(jobId, status, updates = {}) {\n        const updateData = {\n            status,\n            ...updates\n        };\n        if (status === 'running') {\n            updateData.startedAt = new Date();\n        } else if (status === 'completed' || status === 'failed') {\n            updateData.completedAt = new Date();\n        }\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'sync_jobs', jobId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, updateData);\n    }\n    static async getActive() {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'sync_jobs'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('status', 'in', [\n            'pending',\n            'running'\n        ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)('createdAt', 'asc'));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n    static async getByFeed(feedId, limitCount = 20) {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'sync_jobs'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('feedId', '==', feedId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)('createdAt', 'desc'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n}\nclass WebhookModel {\n    static async create(userId, webhookData) {\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'webhooks'), {\n            ...webhookData,\n            userId,\n            createdAt: new Date(),\n            isActive: true,\n            lastTriggered: null\n        });\n        return docRef.id;\n    }\n    static async getByUser(userId) {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'webhooks'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('userId', '==', userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)('isActive', '==', true));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n    static async trigger(webhookId, data) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'webhooks', webhookId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, {\n            lastTriggered: new Date(),\n            lastTriggerData: data\n        });\n    }\n    static async getById(webhookId) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'webhooks', webhookId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        return docSnap.exists() ? {\n            id: docSnap.id,\n            ...docSnap.data()\n        } : null;\n    }\n    static async update(webhookId, updates) {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_js__WEBPACK_IMPORTED_MODULE_0__.db, 'webhooks', webhookId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, {\n            ...updates,\n            updatedAt: new Date()\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDRCw0Q0FBRUEsRUFBRSxhQUNmVSx5REFBS0EsQ0FBQyxVQUFVLE1BQU1PLFNBQ3RCUCx5REFBS0EsQ0FBQyxZQUFZLE1BQU07UUFFMUIsTUFBTW9CLFdBQVcsTUFBTXpCLDJEQUFPQSxDQUFDd0I7UUFFL0IsT0FBT0MsU0FBU0MsSUFBSSxDQUFDQyxHQUFHLENBQUM3QixDQUFBQSxNQUFRO2dCQUMvQndCLElBQUl4QixJQUFJd0IsRUFBRTtnQkFDVixHQUFHeEIsSUFBSThCLElBQUksRUFBRTtZQUNmO0lBQ0Y7SUFFQSxhQUFhZ0YsUUFBUUMsU0FBUyxFQUFFakYsSUFBSSxFQUFFO1FBQ3BDLE1BQU1kLFNBQVNoQix1REFBR0EsQ0FBQ0gsNENBQUVBLEVBQUUsWUFBWWtIO1FBQ25DLE1BQU01Ryw2REFBU0EsQ0FBQ2EsUUFBUTtZQUN0QjZGLGVBQWUsSUFBSTNGO1lBQ25COEYsaUJBQWlCbEY7UUFDbkI7SUFDRjtJQUVBLGFBQWFDLFFBQVFnRixTQUFTLEVBQUU7UUFDOUIsTUFBTS9GLFNBQVNoQix1REFBR0EsQ0FBQ0gsNENBQUVBLEVBQUUsWUFBWWtIO1FBQ25DLE1BQU05RSxVQUFVLE1BQU1oQywwREFBTUEsQ0FBQ2U7UUFDN0IsT0FBT2lCLFFBQVFDLE1BQU0sS0FBSztZQUFFVixJQUFJUyxRQUFRVCxFQUFFO1lBQUUsR0FBR1MsUUFBUUgsSUFBSSxFQUFFO1FBQUMsSUFBSTtJQUNwRTtJQUVBLGFBQWFLLE9BQU80RSxTQUFTLEVBQUUzRSxPQUFPLEVBQUU7UUFDdEMsTUFBTXBCLFNBQVNoQix1REFBR0EsQ0FBQ0gsNENBQUVBLEVBQUUsWUFBWWtIO1FBQ25DLE1BQU01Ryw2REFBU0EsQ0FBQ2EsUUFBUTtZQUN0QixHQUFHb0IsT0FBTztZQUNWakIsV0FBVyxJQUFJRDtRQUNqQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9jcmlzdGlhbi9kZXYvaG9sZG9uZS9mZWVkaW1wb3J0L2xpYi9tb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tICcuL2ZpcmViYXNlLmpzJztcbmltcG9ydCB7IFxuICBjb2xsZWN0aW9uLCBcbiAgYWRkRG9jLCBcbiAgZG9jLCBcbiAgZ2V0RG9jLCBcbiAgZ2V0RG9jcywgXG4gIHVwZGF0ZURvYywgXG4gIGRlbGV0ZURvYywgXG4gIHNldERvYyxcbiAgcXVlcnksIFxuICB3aGVyZSwgXG4gIG9yZGVyQnksIFxuICBsaW1pdCBhcyBmYkxpbWl0LFxuICBzdGFydEFmdGVyXG59IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5cbmV4cG9ydCBjbGFzcyBGZWVkTW9kZWwge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlKHVzZXJJZCwgZmVlZERhdGEpIHtcbiAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ2ZlZWRzJyksIHtcbiAgICAgIC4uLmZlZWREYXRhLFxuICAgICAgdXNlcklkLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIGxhc3RTeW5jQXQ6IG51bGwsXG4gICAgICBzeW5jSW50ZXJ2YWw6IGZlZWREYXRhLnN5bmNJbnRlcnZhbCB8fCAzNjAwMDAwLCAvLyAxIGhvdXIgZGVmYXVsdFxuICAgICAgaXNQYXVzZWQ6IGZhbHNlXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvY1JlZi5pZDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRCeVVzZXIodXNlcklkKSB7XG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgJ2ZlZWRzJyksXG4gICAgICB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSxcbiAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJylcbiAgICApO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICBpZDogZG9jLmlkLFxuICAgICAgLi4uZG9jLmRhdGEoKVxuICAgIH0pKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRCeUlkKGZlZWRJZCkge1xuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgJ2ZlZWRzJywgZmVlZElkKTtcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgcmV0dXJuIGRvY1NuYXAuZXhpc3RzKCkgPyB7IGlkOiBkb2NTbmFwLmlkLCAuLi5kb2NTbmFwLmRhdGEoKSB9IDogbnVsbDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGUoZmVlZElkLCB1cGRhdGVzKSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCAnZmVlZHMnLCBmZWVkSWQpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBkZWxldGUoZmVlZElkKSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCAnZmVlZHMnLCBmZWVkSWQpO1xuICAgIGF3YWl0IGRlbGV0ZURvYyhkb2NSZWYpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9kdWN0TW9kZWwge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlT3JVcGRhdGUoZmVlZElkLCBwcm9kdWN0RGF0YSkge1xuICAgIGNvbnN0IHByb2R1Y3RJZCA9IGAke2ZlZWRJZH1fJHtwcm9kdWN0RGF0YS5za3UgfHwgcHJvZHVjdERhdGEuaWR9YDtcbiAgICBcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdwcm9kdWN0cycsIHByb2R1Y3RJZCk7XG4gICAgY29uc3QgZXhpc3RpbmdEb2MgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICBjb25zdCBleGlzdGluZ0RhdGEgPSBleGlzdGluZ0RvYy5leGlzdHMoKSA/IGV4aXN0aW5nRG9jLmRhdGEoKSA6IG51bGw7XG4gICAgXG4gICAgY29uc3Qgc2hvdWxkVXBkYXRlQ2F0ZWdvcnkgPSAhZXhpc3RpbmdEYXRhIHx8ICFleGlzdGluZ0RhdGEuZW1hZ0NhdGVnb3J5O1xuICAgIFxuICAgIGNvbnN0IHByb2R1Y3REb2MgPSB7XG4gICAgICAuLi5wcm9kdWN0RGF0YSxcbiAgICAgIGZlZWRJZCxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLFxuICAgICAgY2F0ZWdvcnlQcm9jZXNzZWQ6IGV4aXN0aW5nRGF0YT8uY2F0ZWdvcnlQcm9jZXNzZWQgfHwgZmFsc2UsXG4gICAgICBlbWFnQ2F0ZWdvcnk6IGV4aXN0aW5nRGF0YT8uZW1hZ0NhdGVnb3J5IHx8IG51bGwsXG4gICAgICBlbWFnQ2F0ZWdvcnlQYXRoOiBleGlzdGluZ0RhdGE/LmVtYWdDYXRlZ29yeVBhdGggfHwgbnVsbFxuICAgIH07XG5cbiAgICBpZiAoIWV4aXN0aW5nRGF0YSkge1xuICAgICAgcHJvZHVjdERvYy5jcmVhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIH1cblxuICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIHByb2R1Y3REb2MsIHsgbWVyZ2U6IHRydWUgfSk7XG4gICAgcmV0dXJuIHByb2R1Y3RJZDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRCeUZlZWQoZmVlZElkLCBsaW1pdENvdW50ID0gMTAwLCBvZmZzZXQgPSAwKSB7XG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgJ3Byb2R1Y3RzJyksXG4gICAgICB3aGVyZSgnZmVlZElkJywgJz09JywgZmVlZElkKSxcbiAgICAgIG9yZGVyQnkoJ2xhc3RVcGRhdGVkJywgJ2Rlc2MnKSxcbiAgICAgIGZiTGltaXQobGltaXRDb3VudClcbiAgICApO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICBpZDogZG9jLmlkLFxuICAgICAgLi4uZG9jLmRhdGEoKVxuICAgIH0pKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRVbnByb2Nlc3NlZFByb2R1Y3RzKGxpbWl0Q291bnQgPSA1MCkge1xuICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZGIsICdwcm9kdWN0cycpLFxuICAgICAgd2hlcmUoJ2NhdGVnb3J5UHJvY2Vzc2VkJywgJz09JywgZmFsc2UpLFxuICAgICAgZmJMaW1pdChsaW1pdENvdW50KVxuICAgICk7XG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIFxuICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcbiAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAuLi5kb2MuZGF0YSgpXG4gICAgfSkpO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNhdGVnb3J5KHByb2R1Y3RJZCwgY2F0ZWdvcnlEYXRhKSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCAncHJvZHVjdHMnLCBwcm9kdWN0SWQpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgIGVtYWdDYXRlZ29yeTogY2F0ZWdvcnlEYXRhLnRpdGxlLFxuICAgICAgZW1hZ0NhdGVnb3J5SWQ6IGNhdGVnb3J5RGF0YS5pZCxcbiAgICAgIGVtYWdDYXRlZ29yeVBhdGg6IGNhdGVnb3J5RGF0YS5wYXRoLFxuICAgICAgY2F0ZWdvcnlQcm9jZXNzZWQ6IHRydWUsXG4gICAgICBjYXRlZ29yeVVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEZvckZlZWRBUEkoZmlsdGVycyA9IHt9KSB7XG4gICAgbGV0IHEgPSBjb2xsZWN0aW9uKGRiLCAncHJvZHVjdHMnKTtcbiAgICBjb25zdCBjb25kaXRpb25zID0gW107XG4gICAgXG4gICAgaWYgKGZpbHRlcnMuZmVlZElkKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2god2hlcmUoJ2ZlZWRJZCcsICc9PScsIGZpbHRlcnMuZmVlZElkKSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChmaWx0ZXJzLmJyYW5kKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2god2hlcmUoJ2JyYW5kJywgJz09JywgZmlsdGVycy5icmFuZCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZmlsdGVycy5saW1pdCkge1xuICAgICAgY29uZGl0aW9ucy5wdXNoKGZiTGltaXQoZmlsdGVycy5saW1pdCkpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBxID0gcXVlcnkocSwgLi4uY29uZGl0aW9ucyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICBpZDogZG9jLmlkLFxuICAgICAgLi4uZG9jLmRhdGEoKVxuICAgIH0pKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRGb3JEYXNoYm9hcmQoZmlsdGVycyA9IHt9KSB7XG4gICAgbGV0IHEgPSBjb2xsZWN0aW9uKGRiLCAncHJvZHVjdHMnKTtcbiAgICBjb25zdCBjb25kaXRpb25zID0gW107XG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IHVzZXIncyBmZWVkc1xuICAgIGlmIChmaWx0ZXJzLmZlZWRJZHMgJiYgZmlsdGVycy5mZWVkSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbmRpdGlvbnMucHVzaCh3aGVyZSgnZmVlZElkJywgJ2luJywgZmlsdGVycy5mZWVkSWRzLnNsaWNlKDAsIDEwKSkpOyAvLyBGaXJlc3RvcmUgbGltaXRcbiAgICB9XG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IHNwZWNpZmljIGZlZWRcbiAgICBpZiAoZmlsdGVycy5mZWVkSWQpIHtcbiAgICAgIGNvbmRpdGlvbnMucHVzaCh3aGVyZSgnZmVlZElkJywgJz09JywgZmlsdGVycy5mZWVkSWQpKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IGJyYW5kXG4gICAgaWYgKGZpbHRlcnMuYnJhbmQpIHtcbiAgICAgIGNvbmRpdGlvbnMucHVzaCh3aGVyZSgnYnJhbmQnLCAnPT0nLCBmaWx0ZXJzLmJyYW5kKSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZpbHRlciBieSBjYXRlZ29yeSBwcm9jZXNzaW5nIHN0YXR1c1xuICAgIGlmIChmaWx0ZXJzLmNhdGVnb3J5UHJvY2Vzc2VkICE9PSBudWxsKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2god2hlcmUoJ2NhdGVnb3J5UHJvY2Vzc2VkJywgJz09JywgZmlsdGVycy5jYXRlZ29yeVByb2Nlc3NlZCkpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgb3JkZXJpbmcgYW5kIGxpbWl0XG4gICAgY29uZGl0aW9ucy5wdXNoKG9yZGVyQnkoJ2xhc3RVcGRhdGVkJywgJ2Rlc2MnKSk7XG4gICAgY29uZGl0aW9ucy5wdXNoKGZiTGltaXQoZmlsdGVycy5saW1pdCB8fCA1MCkpO1xuICAgIFxuICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIHEgPSBxdWVyeShxLCAuLi5jb25kaXRpb25zKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgIGxldCBwcm9kdWN0cyA9IHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xuICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgIC4uLmRvYy5kYXRhKClcbiAgICB9KSk7XG4gICAgXG4gICAgLy8gQ2xpZW50LXNpZGUgZmlsdGVyaW5nIGZvciBzZWFyY2ggdGVybXMgKHNpbmNlIEZpcmVzdG9yZSBkb2Vzbid0IHN1cHBvcnQgZnVsbC10ZXh0IHNlYXJjaClcbiAgICBpZiAoZmlsdGVycy5zZWFyY2gpIHtcbiAgICAgIGNvbnN0IHNlYXJjaExvd2VyID0gZmlsdGVycy5zZWFyY2gudG9Mb3dlckNhc2UoKTtcbiAgICAgIHByb2R1Y3RzID0gcHJvZHVjdHMuZmlsdGVyKHByb2R1Y3QgPT4gXG4gICAgICAgIChwcm9kdWN0LnRpdGxlIHx8ICcnKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxuICAgICAgICAocHJvZHVjdC5kZXNjcmlwdGlvbiB8fCAnJykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcbiAgICAgICAgKHByb2R1Y3QuYnJhbmQgfHwgJycpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XG4gICAgICAgIChwcm9kdWN0Lm9yaWdpbmFsQ2F0ZWdvcmllcyB8fCBbXSkuc29tZShjYXQgPT4gXG4gICAgICAgICAgY2F0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwcm9kdWN0cyxcbiAgICAgIHRvdGFsOiBwcm9kdWN0cy5sZW5ndGhcbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEJyYW5kc0J5VXNlcihmZWVkSWRzKSB7XG4gICAgaWYgKCFmZWVkSWRzIHx8IGZlZWRJZHMubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG4gICAgXG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgJ3Byb2R1Y3RzJyksXG4gICAgICB3aGVyZSgnZmVlZElkJywgJ2luJywgZmVlZElkcy5zbGljZSgwLCAxMCkpXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgY29uc3QgYnJhbmRzID0gbmV3IFNldCgpO1xuICAgIFxuICAgIHNuYXBzaG90LmRvY3MuZm9yRWFjaChkb2MgPT4ge1xuICAgICAgY29uc3QgcHJvZHVjdCA9IGRvYy5kYXRhKCk7XG4gICAgICBpZiAocHJvZHVjdC5icmFuZCAmJiBwcm9kdWN0LmJyYW5kLnRyaW0oKSkge1xuICAgICAgICBicmFuZHMuYWRkKHByb2R1Y3QuYnJhbmQudHJpbSgpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gQXJyYXkuZnJvbShicmFuZHMpLnNvcnQoKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRQcm9jZXNzaW5nU3RhdHMoZmVlZElkcykge1xuICAgIGlmICghZmVlZElkcyB8fCBmZWVkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgcHJvY2Vzc2VkOiAwLCB1bnByb2Nlc3NlZDogMCwgdG90YWw6IDAgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgJ3Byb2R1Y3RzJyksXG4gICAgICB3aGVyZSgnZmVlZElkJywgJ2luJywgZmVlZElkcy5zbGljZSgwLCAxMCkpXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgbGV0IHByb2Nlc3NlZCA9IDA7XG4gICAgbGV0IHVucHJvY2Vzc2VkID0gMDtcbiAgICBcbiAgICBzbmFwc2hvdC5kb2NzLmZvckVhY2goZG9jID0+IHtcbiAgICAgIGNvbnN0IHByb2R1Y3QgPSBkb2MuZGF0YSgpO1xuICAgICAgaWYgKHByb2R1Y3QuY2F0ZWdvcnlQcm9jZXNzZWQgPT09IHRydWUpIHtcbiAgICAgICAgcHJvY2Vzc2VkKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bnByb2Nlc3NlZCsrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwcm9jZXNzZWQsXG4gICAgICB1bnByb2Nlc3NlZCxcbiAgICAgIHRvdGFsOiBwcm9jZXNzZWQgKyB1bnByb2Nlc3NlZFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN5bmNKb2JNb2RlbCB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUoZmVlZElkLCB0eXBlID0gJ3NjaGVkdWxlZCcpIHtcbiAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgJ3N5bmNfam9icycpLCB7XG4gICAgICBmZWVkSWQsXG4gICAgICB0eXBlLFxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBzdGFydGVkQXQ6IG51bGwsXG4gICAgICBjb21wbGV0ZWRBdDogbnVsbCxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgaXRlbXNQcm9jZXNzZWQ6IDAsXG4gICAgICBpdGVtc1RvdGFsOiAwXG4gICAgfSk7XG4gICAgcmV0dXJuIGRvY1JlZi5pZDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTdGF0dXMoam9iSWQsIHN0YXR1cywgdXBkYXRlcyA9IHt9KSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgIHN0YXR1cyxcbiAgICAgIC4uLnVwZGF0ZXNcbiAgICB9O1xuICAgIFxuICAgIGlmIChzdGF0dXMgPT09ICdydW5uaW5nJykge1xuICAgICAgdXBkYXRlRGF0YS5zdGFydGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnY29tcGxldGVkJyB8fCBzdGF0dXMgPT09ICdmYWlsZWQnKSB7XG4gICAgICB1cGRhdGVEYXRhLmNvbXBsZXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCAnc3luY19qb2JzJywgam9iSWQpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHVwZGF0ZURhdGEpO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEFjdGl2ZSgpIHtcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGRiLCAnc3luY19qb2JzJyksXG4gICAgICB3aGVyZSgnc3RhdHVzJywgJ2luJywgWydwZW5kaW5nJywgJ3J1bm5pbmcnXSksXG4gICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnYXNjJylcbiAgICApO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICBpZDogZG9jLmlkLFxuICAgICAgLi4uZG9jLmRhdGEoKVxuICAgIH0pKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRCeUZlZWQoZmVlZElkLCBsaW1pdENvdW50ID0gMjApIHtcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGRiLCAnc3luY19qb2JzJyksXG4gICAgICB3aGVyZSgnZmVlZElkJywgJz09JywgZmVlZElkKSxcbiAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXG4gICAgICBmYkxpbWl0KGxpbWl0Q291bnQpXG4gICAgKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xuICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgIC4uLmRvYy5kYXRhKClcbiAgICB9KSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFdlYmhvb2tNb2RlbCB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUodXNlcklkLCB3ZWJob29rRGF0YSkge1xuICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCAnd2ViaG9va3MnKSwge1xuICAgICAgLi4ud2ViaG9va0RhdGEsXG4gICAgICB1c2VySWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGxhc3RUcmlnZ2VyZWQ6IG51bGxcbiAgICB9KTtcbiAgICByZXR1cm4gZG9jUmVmLmlkO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldEJ5VXNlcih1c2VySWQpIHtcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGRiLCAnd2ViaG9va3MnKSxcbiAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLFxuICAgICAgd2hlcmUoJ2lzQWN0aXZlJywgJz09JywgdHJ1ZSlcbiAgICApO1xuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoZG9jID0+ICh7XG4gICAgICBpZDogZG9jLmlkLFxuICAgICAgLi4uZG9jLmRhdGEoKVxuICAgIH0pKTtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0cmlnZ2VyKHdlYmhvb2tJZCwgZGF0YSkge1xuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgJ3dlYmhvb2tzJywgd2ViaG9va0lkKTtcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICBsYXN0VHJpZ2dlcmVkOiBuZXcgRGF0ZSgpLFxuICAgICAgbGFzdFRyaWdnZXJEYXRhOiBkYXRhXG4gICAgfSk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0QnlJZCh3ZWJob29rSWQpIHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICd3ZWJob29rcycsIHdlYmhvb2tJZCk7XG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgIHJldHVybiBkb2NTbmFwLmV4aXN0cygpID8geyBpZDogZG9jU25hcC5pZCwgLi4uZG9jU25hcC5kYXRhKCkgfSA6IG51bGw7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlKHdlYmhvb2tJZCwgdXBkYXRlcykge1xuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYiwgJ3dlYmhvb2tzJywgd2ViaG9va0lkKTtcbiAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZGIiLCJjb2xsZWN0aW9uIiwiYWRkRG9jIiwiZG9jIiwiZ2V0RG9jIiwiZ2V0RG9jcyIsInVwZGF0ZURvYyIsImRlbGV0ZURvYyIsInNldERvYyIsInF1ZXJ5Iiwid2hlcmUiLCJvcmRlckJ5IiwibGltaXQiLCJmYkxpbWl0Iiwic3RhcnRBZnRlciIsIkZlZWRNb2RlbCIsImNyZWF0ZSIsInVzZXJJZCIsImZlZWREYXRhIiwiZG9jUmVmIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInN0YXR1cyIsImxhc3RTeW5jQXQiLCJzeW5jSW50ZXJ2YWwiLCJpc1BhdXNlZCIsImlkIiwiZ2V0QnlVc2VyIiwicSIsInNuYXBzaG90IiwiZG9jcyIsIm1hcCIsImRhdGEiLCJnZXRCeUlkIiwiZmVlZElkIiwiZG9jU25hcCIsImV4aXN0cyIsInVwZGF0ZSIsInVwZGF0ZXMiLCJkZWxldGUiLCJQcm9kdWN0TW9kZWwiLCJjcmVhdGVPclVwZGF0ZSIsInByb2R1Y3REYXRhIiwicHJvZHVjdElkIiwic2t1IiwiZXhpc3RpbmdEb2MiLCJleGlzdGluZ0RhdGEiLCJzaG91bGRVcGRhdGVDYXRlZ29yeSIsImVtYWdDYXRlZ29yeSIsInByb2R1Y3REb2MiLCJsYXN0VXBkYXRlZCIsImNhdGVnb3J5UHJvY2Vzc2VkIiwiZW1hZ0NhdGVnb3J5UGF0aCIsIm1lcmdlIiwiZ2V0QnlGZWVkIiwibGltaXRDb3VudCIsIm9mZnNldCIsImdldFVucHJvY2Vzc2VkUHJvZHVjdHMiLCJ1cGRhdGVDYXRlZ29yeSIsImNhdGVnb3J5RGF0YSIsInRpdGxlIiwiZW1hZ0NhdGVnb3J5SWQiLCJwYXRoIiwiY2F0ZWdvcnlVcGRhdGVkQXQiLCJnZXRGb3JGZWVkQVBJIiwiZmlsdGVycyIsImNvbmRpdGlvbnMiLCJwdXNoIiwiYnJhbmQiLCJsZW5ndGgiLCJnZXRGb3JEYXNoYm9hcmQiLCJmZWVkSWRzIiwic2xpY2UiLCJwcm9kdWN0cyIsInNlYXJjaCIsInNlYXJjaExvd2VyIiwidG9Mb3dlckNhc2UiLCJmaWx0ZXIiLCJwcm9kdWN0IiwiaW5jbHVkZXMiLCJkZXNjcmlwdGlvbiIsIm9yaWdpbmFsQ2F0ZWdvcmllcyIsInNvbWUiLCJjYXQiLCJ0b3RhbCIsImdldEJyYW5kc0J5VXNlciIsImJyYW5kcyIsIlNldCIsImZvckVhY2giLCJ0cmltIiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwic29ydCIsImdldFByb2Nlc3NpbmdTdGF0cyIsInByb2Nlc3NlZCIsInVucHJvY2Vzc2VkIiwiU3luY0pvYk1vZGVsIiwidHlwZSIsInN0YXJ0ZWRBdCIsImNvbXBsZXRlZEF0IiwiZXJyb3IiLCJpdGVtc1Byb2Nlc3NlZCIsIml0ZW1zVG90YWwiLCJ1cGRhdGVTdGF0dXMiLCJqb2JJZCIsInVwZGF0ZURhdGEiLCJnZXRBY3RpdmUiLCJXZWJob29rTW9kZWwiLCJ3ZWJob29rRGF0YSIsImlzQWN0aXZlIiwibGFzdFRyaWdnZXJlZCIsInRyaWdnZXIiLCJ3ZWJob29rSWQiLCJsYXN0VHJpZ2dlckRhdGEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/models.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdashboard%2Fproducts.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdashboard%2Fproducts.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_dashboard_products_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/dashboard/products.js */ \"(api-node)/./pages/api/dashboard/products.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_dashboard_products_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_dashboard_products_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_dashboard_products_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_dashboard_products_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/dashboard/products\",\n        pathname: \"/api/dashboard/products\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_dashboard_products_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZGFzaGJvYXJkJTJGcHJvZHVjdHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmRhc2hib2FyZCUyRnByb2R1Y3RzLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQzhEO0FBQzlEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyw2REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsNkRBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvZGFzaGJvYXJkL3Byb2R1Y3RzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kYXNoYm9hcmQvcHJvZHVjdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kYXNoYm9hcmQvcHJvZHVjdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdashboard%2Fproducts.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/dashboard/products.js":
/*!*****************************************!*\
  !*** ./pages/api/dashboard/products.js ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/models.js */ \"(api-node)/./lib/models.js\");\n/* harmony import */ var _lib_firebase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/firebase.js */ \"(api-node)/./lib/firebase.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"firebase/firestore\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_models_js__WEBPACK_IMPORTED_MODULE_0__, _lib_firebase_js__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__]);\n([_lib_models_js__WEBPACK_IMPORTED_MODULE_0__, _lib_firebase_js__WEBPACK_IMPORTED_MODULE_1__, firebase_firestore__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        res.setHeader('Allow', [\n            'GET'\n        ]);\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        // Get the user ID from the session/token\n        const { userId } = req.query;\n        if (!userId) {\n            return res.status(401).json({\n                error: 'User ID required'\n            });\n        }\n        const { search = '', brand = '', feedId = '', categoryProcessed = '', limit = 50, offset = 0 } = req.query;\n        // Get user's feeds to filter products\n        const userFeeds = await _lib_models_js__WEBPACK_IMPORTED_MODULE_0__.FeedModel.getByUser(userId);\n        const feedIds = userFeeds.map((feed)=>feed.id);\n        if (feedIds.length === 0) {\n            return res.json({\n                products: [],\n                total: 0,\n                brands: [],\n                feeds: [],\n                processingStats: {\n                    processed: 0,\n                    unprocessed: 0,\n                    total: 0\n                }\n            });\n        }\n        // Build filters for the dashboard\n        const filters = {\n            feedIds,\n            search: search.toLowerCase().trim(),\n            brand: brand.trim(),\n            feedId: feedId.trim(),\n            categoryProcessed: categoryProcessed === '' ? null : categoryProcessed === 'true',\n            limit: Math.min(parseInt(limit) || 50, 100),\n            offset: parseInt(offset) || 0\n        };\n        // Get products with dashboard-specific filtering\n        const result = await _lib_models_js__WEBPACK_IMPORTED_MODULE_0__.ProductModel.getForDashboard(filters);\n        // Get all unique brands for filter dropdown\n        const brands = await _lib_models_js__WEBPACK_IMPORTED_MODULE_0__.ProductModel.getBrandsByUser(feedIds);\n        // Get processing statistics\n        const processingStats = await _lib_models_js__WEBPACK_IMPORTED_MODULE_0__.ProductModel.getProcessingStats(feedIds);\n        return res.json({\n            products: result.products,\n            total: result.total,\n            brands,\n            feeds: userFeeds.map((feed)=>({\n                    id: feed.id,\n                    name: feed.name,\n                    url: feed.url\n                })),\n            processingStats,\n            filters: {\n                search: search || null,\n                brand: brand || null,\n                feedId: feedId || null,\n                categoryProcessed: categoryProcessed || null\n            }\n        });\n    } catch (error) {\n        console.error('Dashboard products API error:', error);\n        return res.status(500).json({\n            error: 'Internal server error'\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9kYXNoYm9hcmQvcHJvZHVjdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRTtBQUNqQjtBQUMyRTtBQUM3RTtBQUUvQixlQUFlYyxRQUFRQyxHQUFHLEVBQUVDLEdBQUc7SUFDNUMsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEJELElBQUlFLFNBQVMsQ0FBQyxTQUFTO1lBQUM7U0FBTTtRQUM5QixPQUFPRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSxJQUFJO1FBQ0YseUNBQXlDO1FBQ3pDLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUdQLElBQUlYLEtBQUs7UUFDNUIsSUFBSSxDQUFDa0IsUUFBUTtZQUNYLE9BQU9OLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBbUI7UUFDMUQ7UUFFQSxNQUFNLEVBQ0pFLFNBQVMsRUFBRSxFQUNYQyxRQUFRLEVBQUUsRUFDVkMsU0FBUyxFQUFFLEVBQ1hDLG9CQUFvQixFQUFFLEVBQ3RCbkIsUUFBUSxFQUFFLEVBQ1ZvQixTQUFTLENBQUMsRUFDWCxHQUFHWixJQUFJWCxLQUFLO1FBRWIsc0NBQXNDO1FBQ3RDLE1BQU13QixZQUFZLE1BQU0zQixxREFBU0EsQ0FBQzRCLFNBQVMsQ0FBQ1A7UUFDNUMsTUFBTVEsVUFBVUYsVUFBVUcsR0FBRyxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLQyxFQUFFO1FBRTdDLElBQUlILFFBQVFJLE1BQU0sS0FBSyxHQUFHO1lBQ3hCLE9BQU9sQixJQUFJSSxJQUFJLENBQUM7Z0JBQ2RlLFVBQVUsRUFBRTtnQkFDWkMsT0FBTztnQkFDUEMsUUFBUSxFQUFFO2dCQUNWQyxPQUFPLEVBQUU7Z0JBQ1RDLGlCQUFpQjtvQkFBRUMsV0FBVztvQkFBR0MsYUFBYTtvQkFBR0wsT0FBTztnQkFBRTtZQUM1RDtRQUNGO1FBRUEsa0NBQWtDO1FBQ2xDLE1BQU1NLFVBQVU7WUFDZFo7WUFDQVAsUUFBUUEsT0FBT29CLFdBQVcsR0FBR0MsSUFBSTtZQUNqQ3BCLE9BQU9BLE1BQU1vQixJQUFJO1lBQ2pCbkIsUUFBUUEsT0FBT21CLElBQUk7WUFDbkJsQixtQkFBbUJBLHNCQUFzQixLQUFLLE9BQU9BLHNCQUFzQjtZQUMzRW5CLE9BQU9zQyxLQUFLQyxHQUFHLENBQUNDLFNBQVN4QyxVQUFVLElBQUk7WUFDdkNvQixRQUFRb0IsU0FBU3BCLFdBQVc7UUFDOUI7UUFFQSxpREFBaUQ7UUFDakQsTUFBTXFCLFNBQVMsTUFBTWhELHdEQUFZQSxDQUFDaUQsZUFBZSxDQUFDUDtRQUVsRCw0Q0FBNEM7UUFDNUMsTUFBTUwsU0FBUyxNQUFNckMsd0RBQVlBLENBQUNrRCxlQUFlLENBQUNwQjtRQUVsRCw0QkFBNEI7UUFDNUIsTUFBTVMsa0JBQWtCLE1BQU12Qyx3REFBWUEsQ0FBQ21ELGtCQUFrQixDQUFDckI7UUFFOUQsT0FBT2QsSUFBSUksSUFBSSxDQUFDO1lBQ2RlLFVBQVVhLE9BQU9iLFFBQVE7WUFDekJDLE9BQU9ZLE9BQU9aLEtBQUs7WUFDbkJDO1lBQ0FDLE9BQU9WLFVBQVVHLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUztvQkFBRUMsSUFBSUQsS0FBS0MsRUFBRTtvQkFBRW1CLE1BQU1wQixLQUFLb0IsSUFBSTtvQkFBRUMsS0FBS3JCLEtBQUtxQixHQUFHO2dCQUFDO1lBQzVFZDtZQUNBRyxTQUFTO2dCQUNQbkIsUUFBUUEsVUFBVTtnQkFDbEJDLE9BQU9BLFNBQVM7Z0JBQ2hCQyxRQUFRQSxVQUFVO2dCQUNsQkMsbUJBQW1CQSxxQkFBcUI7WUFDMUM7UUFDRjtJQUVGLEVBQUUsT0FBT0wsT0FBTztRQUNkaUMsUUFBUWpDLEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE9BQU9MLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QjtJQUMvRDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvY3Jpc3RpYW4vZGV2L2hvbGRvbmUvZmVlZGltcG9ydC9wYWdlcy9hcGkvZGFzaGJvYXJkL3Byb2R1Y3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByb2R1Y3RNb2RlbCwgRmVlZE1vZGVsIH0gZnJvbSAnLi4vLi4vLi4vbGliL21vZGVscy5qcyc7XG5pbXBvcnQgeyBhdXRoIH0gZnJvbSAnLi4vLi4vLi4vbGliL2ZpcmViYXNlLmpzJztcbmltcG9ydCB7IGNvbGxlY3Rpb24sIHF1ZXJ5LCB3aGVyZSwgb3JkZXJCeSwgbGltaXQgYXMgZmJMaW1pdCwgZ2V0RG9jcywgc3RhcnRBZnRlciwgZ2V0RG9jLCBkb2MgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9saWIvZmlyZWJhc2UuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBHZXQgdGhlIHVzZXIgSUQgZnJvbSB0aGUgc2Vzc2lvbi90b2tlblxuICAgIGNvbnN0IHsgdXNlcklkIH0gPSByZXEucXVlcnk7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVXNlciBJRCByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgc2VhcmNoID0gJycsXG4gICAgICBicmFuZCA9ICcnLFxuICAgICAgZmVlZElkID0gJycsXG4gICAgICBjYXRlZ29yeVByb2Nlc3NlZCA9ICcnLFxuICAgICAgbGltaXQgPSA1MCxcbiAgICAgIG9mZnNldCA9IDBcbiAgICB9ID0gcmVxLnF1ZXJ5O1xuXG4gICAgLy8gR2V0IHVzZXIncyBmZWVkcyB0byBmaWx0ZXIgcHJvZHVjdHNcbiAgICBjb25zdCB1c2VyRmVlZHMgPSBhd2FpdCBGZWVkTW9kZWwuZ2V0QnlVc2VyKHVzZXJJZCk7XG4gICAgY29uc3QgZmVlZElkcyA9IHVzZXJGZWVkcy5tYXAoZmVlZCA9PiBmZWVkLmlkKTtcblxuICAgIGlmIChmZWVkSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgICAgcHJvZHVjdHM6IFtdLFxuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgYnJhbmRzOiBbXSxcbiAgICAgICAgZmVlZHM6IFtdLFxuICAgICAgICBwcm9jZXNzaW5nU3RhdHM6IHsgcHJvY2Vzc2VkOiAwLCB1bnByb2Nlc3NlZDogMCwgdG90YWw6IDAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgZmlsdGVycyBmb3IgdGhlIGRhc2hib2FyZFxuICAgIGNvbnN0IGZpbHRlcnMgPSB7XG4gICAgICBmZWVkSWRzLFxuICAgICAgc2VhcmNoOiBzZWFyY2gudG9Mb3dlckNhc2UoKS50cmltKCksXG4gICAgICBicmFuZDogYnJhbmQudHJpbSgpLFxuICAgICAgZmVlZElkOiBmZWVkSWQudHJpbSgpLFxuICAgICAgY2F0ZWdvcnlQcm9jZXNzZWQ6IGNhdGVnb3J5UHJvY2Vzc2VkID09PSAnJyA/IG51bGwgOiBjYXRlZ29yeVByb2Nlc3NlZCA9PT0gJ3RydWUnLFxuICAgICAgbGltaXQ6IE1hdGgubWluKHBhcnNlSW50KGxpbWl0KSB8fCA1MCwgMTAwKSwgLy8gTWF4IDEwMCBwcm9kdWN0cyBwZXIgcmVxdWVzdFxuICAgICAgb2Zmc2V0OiBwYXJzZUludChvZmZzZXQpIHx8IDBcbiAgICB9O1xuXG4gICAgLy8gR2V0IHByb2R1Y3RzIHdpdGggZGFzaGJvYXJkLXNwZWNpZmljIGZpbHRlcmluZ1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb2R1Y3RNb2RlbC5nZXRGb3JEYXNoYm9hcmQoZmlsdGVycyk7XG4gICAgXG4gICAgLy8gR2V0IGFsbCB1bmlxdWUgYnJhbmRzIGZvciBmaWx0ZXIgZHJvcGRvd25cbiAgICBjb25zdCBicmFuZHMgPSBhd2FpdCBQcm9kdWN0TW9kZWwuZ2V0QnJhbmRzQnlVc2VyKGZlZWRJZHMpO1xuICAgIFxuICAgIC8vIEdldCBwcm9jZXNzaW5nIHN0YXRpc3RpY3NcbiAgICBjb25zdCBwcm9jZXNzaW5nU3RhdHMgPSBhd2FpdCBQcm9kdWN0TW9kZWwuZ2V0UHJvY2Vzc2luZ1N0YXRzKGZlZWRJZHMpO1xuXG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIHByb2R1Y3RzOiByZXN1bHQucHJvZHVjdHMsXG4gICAgICB0b3RhbDogcmVzdWx0LnRvdGFsLFxuICAgICAgYnJhbmRzLFxuICAgICAgZmVlZHM6IHVzZXJGZWVkcy5tYXAoZmVlZCA9PiAoeyBpZDogZmVlZC5pZCwgbmFtZTogZmVlZC5uYW1lLCB1cmw6IGZlZWQudXJsIH0pKSxcbiAgICAgIHByb2Nlc3NpbmdTdGF0cyxcbiAgICAgIGZpbHRlcnM6IHtcbiAgICAgICAgc2VhcmNoOiBzZWFyY2ggfHwgbnVsbCxcbiAgICAgICAgYnJhbmQ6IGJyYW5kIHx8IG51bGwsXG4gICAgICAgIGZlZWRJZDogZmVlZElkIHx8IG51bGwsXG4gICAgICAgIGNhdGVnb3J5UHJvY2Vzc2VkOiBjYXRlZ29yeVByb2Nlc3NlZCB8fCBudWxsXG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdEYXNoYm9hcmQgcHJvZHVjdHMgQVBJIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiUHJvZHVjdE1vZGVsIiwiRmVlZE1vZGVsIiwiYXV0aCIsImNvbGxlY3Rpb24iLCJxdWVyeSIsIndoZXJlIiwib3JkZXJCeSIsImxpbWl0IiwiZmJMaW1pdCIsImdldERvY3MiLCJzdGFydEFmdGVyIiwiZ2V0RG9jIiwiZG9jIiwiZGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidXNlcklkIiwic2VhcmNoIiwiYnJhbmQiLCJmZWVkSWQiLCJjYXRlZ29yeVByb2Nlc3NlZCIsIm9mZnNldCIsInVzZXJGZWVkcyIsImdldEJ5VXNlciIsImZlZWRJZHMiLCJtYXAiLCJmZWVkIiwiaWQiLCJsZW5ndGgiLCJwcm9kdWN0cyIsInRvdGFsIiwiYnJhbmRzIiwiZmVlZHMiLCJwcm9jZXNzaW5nU3RhdHMiLCJwcm9jZXNzZWQiLCJ1bnByb2Nlc3NlZCIsImZpbHRlcnMiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJNYXRoIiwibWluIiwicGFyc2VJbnQiLCJyZXN1bHQiLCJnZXRGb3JEYXNoYm9hcmQiLCJnZXRCcmFuZHNCeVVzZXIiLCJnZXRQcm9jZXNzaW5nU3RhdHMiLCJuYW1lIiwidXJsIiwiY29uc29sZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/dashboard/products.js\n");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("firebase/app");;

/***/ }),

/***/ "firebase/auth":
/*!********************************!*\
  !*** external "firebase/auth" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("firebase/auth");;

/***/ }),

/***/ "firebase/firestore":
/*!*************************************!*\
  !*** external "firebase/firestore" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("firebase/firestore");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdashboard%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdashboard%2Fproducts.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();